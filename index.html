<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Match Stats & Momentum</title>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

  <style>
    html, body {
      overflow: hidden; /* Hides scrollbars */
      height: 130vh; /* Ensures full viewport height */
      margin: 0;
      padding: 0;
      font-family: "Inter", sans-serif;
      background: #f8f8f8;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .chart-container {
      width: 90vw;
      max-width: 900px;
      margin: 1vh auto;
      background: #fff;
      border-radius: 8px;
      padding: 2vh;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Responsive Heights */
    #statsChart { height: 45vh; } /* Largest */
    #momentumChart { height: 35vh; } /* Medium */
    #possessionChart { height: 30vh; width: 80vw; max-width: 400px; } /* Smallest */
  </style>
</head>
<body>

  <!-- 1) Stats Chart -->
  <div class="chart-container">
    <div id="statsChart"></div>
  </div>

  <!-- 2) Momentum Chart -->
  <div class="chart-container">
    <div id="momentumChart"></div>
  </div>

  <!-- 3) Possession Chart -->
  <div class="chart-container">
    <div id="possessionChart"></div>
  </div>

  <script>
    /*************************************************************
     * 1) GLOBAL COLORS
     *************************************************************/
    const HOME_COLOR = "#fa3048"; // Red for Home
    const AWAY_COLOR = "#2c2c2c"; // Dark Gray for Away

    /*************************************************************
     * 2) PARSE URL PARAMS (NO PLACEHOLDERS)
     *************************************************************/
    const params = new URLSearchParams(window.location.search);

    // Possession
    const possessionHome = Number(params.get("possessionHome") || 50);
    const possessionAway = Number(params.get("possessionAway") || 50);

    // Stats (Shots, Fouls, etc.)
    const homeStats = [
      Number(params.get("home_shots") || 0),
      Number(params.get("home_shots_on_goal") || 0),
      Number(params.get("home_goal_chances") || 0),
      Number(params.get("home_duels_won") || 0),
      Number(params.get("home_saves") || 0),
      Number(params.get("home_corners") || 0),
      Number(params.get("home_fouls") || 0),
      Number(params.get("home_yellows") || 0),
      Number(params.get("home_reds") || 0)
    ];

    const awayStats = [
      Number(params.get("away_shots") || 0),
      Number(params.get("away_shots_on_goal") || 0),
      Number(params.get("away_goal_chances") || 0),
      Number(params.get("away_duels_won") || 0),
      Number(params.get("away_saves") || 0),
      Number(params.get("away_corners") || 0),
      Number(params.get("away_fouls") || 0),
      Number(params.get("away_yellows") || 0),
      Number(params.get("away_reds") || 0)
    ];

    const statLabels = [
      "Shots", "Shots on Goal", "Goal Chances", "Duels Won",
      "Saves", "Corners", "Fouls", "Yellows", "Reds"
    ];

    // Momentum
    const rawTimeTracker = params.get("time_tracker") || "0,15,30,45,60,75,90";
    const rawMomentum = params.get("momentum_tracker") || "0.5,0.55,0.6,0.55,0.4,0.7,0.6";
    const timeData = rawTimeTracker.split(",").map(x => Number(x.trim()));
    const homeMomentumData = rawMomentum.split(",").map(x => Number(x.trim()));
    const awayMomentumData = homeMomentumData.map(v => 1 - v);

    /*************************************************************
     * 3) CREATE STATS CHART (HORIZONTAL BARS)
     *************************************************************/
    new ApexCharts(document.querySelector("#statsChart"), {
      chart: { type: "bar", height: "100%" },
      series: [
        { name: "Home", data: homeStats },
        { name: "Away", data: awayStats }
      ],
      xaxis: { categories: statLabels },
      colors: [HOME_COLOR, AWAY_COLOR],
      plotOptions: { bar: { horizontal: true
