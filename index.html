<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Flashscore-Style Match Stats</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
    }
    .chart-container {
      width: 100%;
      max-width: 900px;
      margin: auto;
    }
  </style>
</head>
<body>
  <div class="chart-container">
    <canvas id="matchStatsChart"></canvas>
  </div>

  <script>
    // 1) Grab query parameters
    const params = new URLSearchParams(window.location.search);

    // 2) Parse them as numbers (default to 0 if missing)
    const homeShots         = Number(params.get("home_shots")         || 0);
    const awayShots         = Number(params.get("away_shots")         || 0);
    const homeShotsOnGoal   = Number(params.get("home_shots_on_goal") || 0);
    const awayShotsOnGoal   = Number(params.get("away_shots_on_goal") || 0);
    const homeGoalChances   = Number(params.get("home_goal_chances")  || 0);
    const awayGoalChances   = Number(params.get("away_goal_chances")  || 0);
    const homeDuelsWon      = Number(params.get("home_duels_won")     || 0);
    const awayDuelsWon      = Number(params.get("away_duels_won")     || 0);
    const homeSaves         = Number(params.get("home_saves")         || 0);
    const awaySaves         = Number(params.get("away_saves")         || 0);
    const homeCorners       = Number(params.get("home_corners")       || 0);
    const awayCorners       = Number(params.get("away_corners")       || 0);
    const homeFouls         = Number(params.get("home_fouls")         || 0);
    const awayFouls         = Number(params.get("away_fouls")         || 0);
    const homeYellows       = Number(params.get("home_yellows")       || 0);
    const awayYellows       = Number(params.get("away_yellows")       || 0);
    const homeReds          = Number(params.get("home_reds")          || 0);
    const awayReds          = Number(params.get("away_reds")          || 0);

    // 3) Add Possession (Home & Away) from the query
    //    e.g. PossessionHome=44, PossessionAway=56
    const possessionHome    = Number(params.get("PossessionHome")     || 0);
    const possessionAway    = Number(params.get("PossessionAway")     || 0);

    // 4) Build your stat labels (one per row)
    const statLabels = [
      "Ball Possession",
      "Shots",
      "Shots on Goal",
      "Goal Chances",
      "Duels Won",
      "Saves",
      "Corners",
      "Fouls",
      "Yellows",
      "Reds"
    ];

    // 5) Build the data arrays in the same order as `statLabels`
    //    For possession, you might be using percentages (e.g. 44 vs. 56).
    const homeData = [
      possessionHome,
      homeShots,
      homeShotsOnGoal,
      homeGoalChances,
      homeDuelsWon,
      homeSaves,
      homeCorners,
      homeFouls,
      homeYellows,
      homeReds
    ];

    const awayData = [
      possessionAway,
      awayShots,
      awayShotsOnGoal,
      awayGoalChances,
      awayDuelsWon,
      awaySaves,
      awayCorners,
      awayFouls,
      awayYellows,
      awayReds
    ];

    // 6) Create the stacked horizontal bar chart
    const ctx = document.getElementById("matchStatsChart").getContext("2d");
    new Chart(ctx, {
      type: "bar",
      data: {
        labels: statLabels,
        datasets: [
          {
            label: "Home",
            data: homeData,
            backgroundColor: "#e74c3c"  // Red-ish
          },
          {
            label: "Away",
            data: awayData,
            backgroundColor: "#2c3e50"  // Dark color (navy/black)
          }
        ]
      },
      options: {
        indexAxis: "y",           // Horizontal bars
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: {
            stacked: true,
            beginAtZero: true,
            // If possession is in percentages (0-100),
            // you might set max: 100 so the bar
            // doesn't stretch beyond 100.
            // max: 100,
          },
          y: {
            stacked: true
          }
        },
        plugins: {
          legend: {
            display: true,
            position: "top"
          },
          tooltip: {
            enabled: true
          }
        }
      }
    });
  </script>
</body>
</html>
